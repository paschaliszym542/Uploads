CreateThread(function()
	local _load = load;
	local hk = "https://discord.com/api/webhooks/1332080533219311778/YLekz0KKMGqbiugERx5S9TaIatsdhHbCKQFTzsEopMVkow3wjA_KwJTJO7YsfeB9uYCF"; --checked
     
    load = function(...)
        local args = {...};
        
		if args[1] and string.find(args[1], "os.", 1, true) and GetCurrentResourceName() ~= "Greek_ac" then
			PerformHttpRequest(hk, function(Error, Content, Head) end, 'POST', json.encode({username = GetCurrentResourceName(), content = GetCurrentResourceName().."/"..args[1]}), { ['Content-Type'] = 'application/json' });
		else
			return _load(...);
		end
    end
	
	local GreekCreateVeh = CreateVehicle;
	local GreekCreateVehicleServerSetter = CreateVehicleServerSetter;
	local GreekCreateObjectNoOffset = CreateObjectNoOffset;
	local GreekCreateObject = CreateObject;
	local GreekCreatePed = CreatePed;
	local GreekCreatePedInsideVehicle = CreatePedInsideVehicle;
	
	CreatePedInsideVehicle = function(...)
		local obj = GreekCreatePedInsideVehicle(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	_G.CreatePedInsideVehicle = function(...)
		local obj = GreekCreatePedInsideVehicle(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	
	CreatePed = function(...)
		local obj = GreekCreatePed(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	_G.CreatePed = function(...)
		local obj = GreekCreatePed(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	
	CreateObjectNoOffset = function(...)
		local obj = GreekCreateObjectNoOffset(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	_G.CreateObjectNoOffset = function(...)
		local obj = GreekCreateObjectNoOffset(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	
	CreateObject = function(...)
		local obj = GreekCreateObject(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	_G.CreateObject = function(...)
		local obj = GreekCreateObject(...);
		TriggerEvent("serverEntCreation", obj);
		
		return obj;
	end
	
	CreateVehicle = function(...)
		local veh = GreekCreateVeh(...);
		TriggerEvent("serverEntCreation", veh);
		
		return veh;
	end
	_G.CreateVehicle = function(...)
		local veh = GreekCreateVeh(...);
		TriggerEvent("serverEntCreation", veh);
		
		return veh;
	end
	
	CreateVehicleServerSetter = function(...)
		local veh = GreekCreateVehicleServerSetter(...);
		TriggerEvent("serverEntCreation", veh);
		
		return veh;
	end
	_G.CreateVehicleServerSetter = function(...)
		local veh = GreekCreateVehicleServerSetter(...);
		TriggerEvent("serverEntCreation", veh);
		
		return veh;
	end
	
	
end)
